{"version":3,"file":"index.js","sources":["../src/Js/pixabay-api.js","../src/Js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchData(tags, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '45587687-18c2674304307818951f0e796',\n      q: `${tags.trim()}`,\n      image_type: 'photo',\n      per_page: 15,\n      page: page,\n      safesearch: true,\n      orientation: 'horizontal',\n    },\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function galleryMarkup(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(hit => {\n      return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${hit.largeImageURL}\" download=false>\n                <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-img\" width=360  onclick=\"return false\" data-source=\"${hit.largeImageURL}\">\n                <ul class=\"description\">\n                    <li>\n                    <p>Likes</p>\n                    <p class=\"description-value\">${hit.likes}</p>\n                    </li>\n                    <li>\n                    <p>Views</p>\n                    <p class=\"description-value\">${hit.views}</p>\n                    </li>\n                    <li>\n                    <p>Comments</p>\n                    <p class=\"description-value\">${hit.comments}</p>\n                    </li>\n                    <li>\n                    <p>Downloads</p>\n                    <p class=\"description-value\">${hit.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n            </li>\n            `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchData } from './Js/pixabay-api.js';\nimport { galleryMarkup } from './Js/render-function.js';\n\nconst form = document.querySelector('.form');\nconst queryInput = document.querySelector('input[name=\"query\"]');\n\nconst gallery = document.querySelector('.gallery');\n\nconst loader = document.querySelector('.loader');\n\nconst showMoreBtn = document.querySelector('.show-more');\n\niziToast.settings({\n  messageColor: '#fafafb',\n  position: 'bottomRight',\n  backgroundColor: '#ef4040',\n  iconColor: '#fafafb',\n  close: false,\n});\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\nlet tags = '';\nlet page = 1;\nlet images;\nlet quantityPages;\nconst perPage = 15;\n\nconst onForm = async event => {\n  event.preventDefault();\n  tags = queryInput.value.trim();\n  if (tags === '') {\n    iziToast.show({\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  page = 1;\n  loader.classList.remove('visually-hidden');\n\n  try {\n    images = await fetchData(tags, page);\n    quantityPages = Math.ceil(images.total / perPage);\n\n    if (images.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      loader.classList.add('visually-hidden');\n      return;\n    }\n\n    if (quantityPages < 1) {\n      showMoreBtn.classList.add('visually-hidden');\n    } else {\n      showMoreBtn.classList.remove('visually-hidden');\n    }\n\n    galleryMarkup(images.hits);\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('visually-hidden');\n    form.reset();\n  }\n};\n\nconst onBtn = async () => {\n  page += 1;\n\n  try {\n    showMoreBtn.classList.add('visually-hidden');\n    loader.classList.remove('visually-hidden');\n\n    images = await fetchData(tags, page);\n    galleryMarkup(images.hits);\n    lightbox.refresh();\n\n    const galleryEl = document.querySelector('.gallery-item');\n\n    const galleryElHeight = galleryEl.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: galleryElHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (images.total <= Math.ceil(page * perPage)) {\n      showMoreBtn.classList.add('visually-hidden');\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showMoreBtn.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('visually-hidden');\n  }\n};\n\nform.addEventListener('submit', onForm);\nshowMoreBtn.addEventListener('click', onBtn);\n"],"names":["fetchData","tags","page","axios","galleryMarkup","images","gallery","markup","hit","form","queryInput","loader","showMoreBtn","iziToast","lightbox","SimpleLightbox","quantityPages","perPage","onForm","event","error","onBtn","galleryElHeight"],"mappings":"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"}